<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 700">
  <defs>
    <style>
      .primary-blue { fill: #2C5F8D; }
      .secondary-teal { fill: #287D7D; }
      .accent-orange { fill: #E67E50; }
      .success-green { fill: #52A675; }
      .neutral-gray { fill: #5A6C7D; }

      .title { font: bold 32px sans-serif; fill: #2C3E50; }
      .stage-title { font: bold 20px sans-serif; fill: #ffffff; }
      .stage-desc { font: 16px sans-serif; fill: #ffffff; }
      .resource-label { font: bold 16px sans-serif; fill: #2C3E50; }
      .card-border { stroke: #5A6C7D; stroke-width: 2; }
    </style>
  </defs>

  <!-- Title -->
  <text x="700" y="45" text-anchor="middle" class="title">Kubernetes ML Pipeline: End-to-End Workflow</text>

  <!-- Stage 1: Data Prep -->
  <rect x="50" y="100" width="220" height="120" class="primary-blue card-border" rx="8"/>
  <text x="160" y="140" text-anchor="middle" class="stage-title">📊 Data Prep</text>
  <text x="160" y="170" text-anchor="middle" class="stage-desc">Clean &amp; transform</text>
  <text x="160" y="195" text-anchor="middle" class="stage-desc">Feature engineering</text>

  <text x="160" y="250" text-anchor="middle" class="resource-label">⚙️ CPU Nodes</text>
  <text x="160" y="275" text-anchor="middle" style="font: 14px sans-serif; fill: #5A6C7D;">KubeFlow Pipeline</text>

  <!-- Arrow 1 -->
  <path d="M 270 160 L 320 160" stroke="#5A6C7D" stroke-width="4" marker-end="url(#arrow1)"/>
  <defs>
    <marker id="arrow1" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#5A6C7D"/>
    </marker>
  </defs>

  <!-- Stage 2: Training -->
  <rect x="320" y="100" width="220" height="120" class="secondary-teal card-border" rx="8"/>
  <text x="430" y="140" text-anchor="middle" class="stage-title">🧠 Training</text>
  <text x="430" y="170" text-anchor="middle" class="stage-desc">Model training</text>
  <text x="430" y="195" text-anchor="middle" class="stage-desc">Hyperparameter tuning</text>

  <text x="430" y="250" text-anchor="middle" style="font: bold 16px sans-serif; fill: #C9594C;">🎮 GPU Nodes</text>
  <text x="430" y="275" text-anchor="middle" style="font: 14px sans-serif; fill: #5A6C7D;">Distributed Training</text>

  <!-- Arrow 2 -->
  <path d="M 540 160 L 590 160" stroke="#5A6C7D" stroke-width="4" marker-end="url(#arrow2)"/>
  <defs>
    <marker id="arrow2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#5A6C7D"/>
    </marker>
  </defs>

  <!-- Stage 3: Validation -->
  <rect x="590" y="100" width="220" height="120" class="accent-orange card-border" rx="8"/>
  <text x="700" y="140" text-anchor="middle" class="stage-title">✓ Validation</text>
  <text x="700" y="170" text-anchor="middle" class="stage-desc">Model evaluation</text>
  <text x="700" y="195" text-anchor="middle" class="stage-desc">Performance metrics</text>

  <text x="700" y="250" text-anchor="middle" class="resource-label">⚙️ CPU Nodes</text>
  <text x="700" y="275" text-anchor="middle" style="font: 14px sans-serif; fill: #5A6C7D;">MLflow Tracking</text>

  <!-- Arrow 3 -->
  <path d="M 810 160 L 860 160" stroke="#5A6C7D" stroke-width="4" marker-end="url(#arrow3)"/>
  <defs>
    <marker id="arrow3" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#5A6C7D"/>
    </marker>
  </defs>

  <!-- Stage 4: Deployment -->
  <rect x="860" y="100" width="220" height="120" class="success-green card-border" rx="8"/>
  <text x="970" y="140" text-anchor="middle" class="stage-title">🚀 Deployment</text>
  <text x="970" y="170" text-anchor="middle" class="stage-desc">Model serving</text>
  <text x="970" y="195" text-anchor="middle" class="stage-desc">Auto-scaling</text>

  <text x="970" y="250" text-anchor="middle" style="font: bold 16px sans-serif; fill: #C9594C;">🎮 GPU / CPU*</text>
  <text x="970" y="275" text-anchor="middle" style="font: 14px sans-serif; fill: #5A6C7D;">KServe Inference</text>

  <!-- Arrow 4 -->
  <path d="M 1080 160 L 1130 160" stroke="#5A6C7D" stroke-width="4" marker-end="url(#arrow4)"/>
  <defs>
    <marker id="arrow4" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#5A6C7D"/>
    </marker>
  </defs>

  <!-- Stage 5: Monitoring -->
  <rect x="1130" y="100" width="220" height="120" class="neutral-gray card-border" rx="8"/>
  <text x="1240" y="140" text-anchor="middle" class="stage-title">📈 Monitoring</text>
  <text x="1240" y="170" text-anchor="middle" class="stage-desc">Performance tracking</text>
  <text x="1240" y="195" text-anchor="middle" class="stage-desc">Drift detection</text>

  <text x="1240" y="250" text-anchor="middle" class="resource-label">⚙️ CPU Nodes</text>
  <text x="1240" y="275" text-anchor="middle" style="font: 14px sans-serif; fill: #5A6C7D;">Prometheus + Grafana</text>

  <!-- Feedback Loop -->
  <path d="M 1350 160 Q 1380 160 1380 300 Q 1380 440 160 440 Q 50 440 50 300 Q 50 160 90 160"
        stroke="#52A675" stroke-width="4" stroke-dasharray="10,5" fill="none" marker-end="url(#arrow-feedback)"/>
  <defs>
    <marker id="arrow-feedback" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#52A675"/>
    </marker>
  </defs>
  <text x="1400" y="285" text-anchor="end" style="font: bold 18px sans-serif; fill: #52A675;">Continuous</text>
  <text x="1400" y="310" text-anchor="end" style="font: bold 18px sans-serif; fill: #52A675;">Retraining</text>

  <!-- Legend -->
  <rect x="50" y="490" width="1300" height="180" fill="#F8F9FA" class="card-border" rx="8"/>
  <text x="700" y="530" text-anchor="middle" style="font: bold 24px sans-serif; fill: #2C3E50;">Resource Allocation by Stage</text>

  <rect x="100" y="560" width="550" height="80" fill="#ffffff" class="card-border" rx="5"/>
  <rect x="120" y="575" width="40" height="40" class="primary-blue" rx="3"/>
  <text x="180" y="605" style="font: 18px sans-serif; fill: #2C3E50;">CPU Nodes: Data prep, validation, monitoring (cost-effective)</text>

  <rect x="750" y="560" width="550" height="80" fill="#ffffff" class="card-border" rx="5"/>
  <rect x="770" y="575" width="40" height="40" fill="#C9594C" rx="3"/>
  <text x="830" y="595" style="font: 18px sans-serif; fill: #2C3E50;">GPU Nodes: Training (required),</text>
  <text x="830" y="620" style="font: 18px sans-serif; fill: #2C3E50;">Inference (for large models &gt;1GB, low latency &lt;100ms)</text>
</svg>